<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete Book Confirmation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        .delete-container {
            border: 2px solid #dc3545;
            padding: 30px;
            border-radius: 5px;
            background-color: #fff5f5;
        }
        h1 {
            color: #dc3545;
        }
        .warning {
            background-color: #ffe6e6;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        .book-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .book-info strong {
            display: block;
            margin-bottom: 5px;
        }
        .button-group {
            display: flex;
            gap: 10px;
        }
        button, a {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            text-decoration: none;
            display: inline-block;
        }
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        .btn-danger:hover {
            background-color: #c82333;
        }
        .btn-cancel {
            background-color: #6c757d;
            color: white;
        }
        .btn-cancel:hover {
            background-color: #5a6268;
        }
        .security-note {
            background-color: #f3e5f5;
            border-left: 4px solid #9c27b0;
            padding: 10px;
            margin-top: 20px;
            border-radius: 4px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="delete-container">
        <h1>⚠️ Delete Book</h1>
        
        <div class="warning">
            <strong>WARNING:</strong> This action cannot be undone.
            Deleting a book will permanently remove it from the database.
        </div>

        <div class="book-info">
            <strong>Book to Delete:</strong>
            <div style="margin-top: 10px; padding: 10px; background-color: white; border-radius: 4px;">
                <strong>Title:</strong> {{ book.title }}<br>
                <strong>Author:</strong> {{ book.author }}<br>
                <strong>Year:</strong> {{ book.publication_year }}
            </div>
        </div>

        <!-- 
            CSRF Token Security:
            The delete form includes {% csrf_token %} to protect against CSRF attacks.
            Django requires CSRF tokens for all POST requests (PUT, PATCH, DELETE, etc.).
            
            This is critical for delete operations to ensure the request came from
            an authorized user, not from a malicious third-party website.
        -->
        <form method="post" style="margin-bottom: 20px;">
            {% csrf_token %}
            <div class="button-group">
                <button type="submit" class="btn-danger">Yes, Delete This Book</button>
                <a href="{% url 'relationship_app:book-list' %}" class="btn-cancel">Cancel, Keep It</a>
            </div>
        </form>

        <!-- Security Information -->
        <div class="security-note">
            <strong>Security Features:</strong>
            <ul>
                <li>✓ CSRF Token protection ({% csrf_token %}) - prevents unauthorized deletion</li>
                <li>✓ Permission required: <code>bookshelf.can_delete</code></li>
                <li>✓ POST method required (not GET) - prevents accidental deletion via URL</li>
                <li>✓ Confirmation page required - user must explicitly confirm</li>
                <li>✓ Book details displayed - ensures user is deleting the correct item</li>
            </ul>
        </div>
    </div>
</body>
</html>
